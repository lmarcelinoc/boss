{
  "info": {
    "name": "SaaS Boilerplate Tests",
    "description": "Automated tests for SaaS Boilerplate API endpoints",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3001/api"
    },
    {
      "key": "accessToken",
      "value": ""
    },
    {
      "key": "refreshToken",
      "value": ""
    },
    {
      "key": "userId",
      "value": ""
    },
    {
      "key": "tenantId",
      "value": ""
    },
    {
      "key": "targetTenantId",
      "value": ""
    },
    {
      "key": "membershipId",
      "value": ""
    },
    {
      "key": "sessionId",
      "value": ""
    },
    {
      "key": "currentSessionId",
      "value": ""
    },
    {
      "key": "roleId",
      "value": ""
    },
    {
      "key": "permissionId",
      "value": ""
    },
    {
      "key": "permissionId1",
      "value": ""
    },
    {
      "key": "permissionId2",
      "value": ""
    },
    {
      "key": "permissionId3",
      "value": ""
    },
    {
      "key": "parentRoleId",
      "value": ""
    },
    {
      "key": "newUserId",
      "value": ""
    },
    {
      "key": "fileKey",
      "value": ""
    },
    {
      "key": "fileUrl",
      "value": ""
    },
    {
      "key": "signedUrl",
      "value": ""
    },
    {
      "key": "copiedFileKey",
      "value": ""
    },
    {
      "key": "teamId",
      "value": ""
    },
    {
      "key": "teamMembershipId",
      "value": ""
    },
    {
      "key": "teamInvitationId",
      "value": ""
    },
    {
      "key": "invitationToken",
      "value": ""
    },
    {
      "key": "movedFileKey",
      "value": ""
    }
  ],
  "item": [
    {
      "name": "Authentication Tests",
      "item": [
        {
          "name": "1. Register User - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Response has required fields', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('message');",
                  "    pm.expect(response).to.have.property('userId');",
                  "    pm.expect(response).to.have.property('tenantId');",
                  "});",
                  "",
                  "pm.test('User ID is valid UUID', function () {",
                  "    const response = pm.response.json();",
                  "    const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;",
                  "    pm.expect(response.userId).to.match(uuidRegex);",
                  "});",
                  "",
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('userId', response.userId);",
                  "    pm.environment.set('tenantId', response.tenantId);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{$randomEmail}}\",\n  \"password\": \"SuperAdmin123!\",\n  \"firstName\": \"Test\",\n  \"lastName\": \"User\",\n  \"tenantName\": \"Test Company {{$randomInt}}\",\n  \"domain\": \"testcompany{{$randomInt}}.com\",\n  \"description\": \"Test tenant for automated testing\",\n  \"contactEmail\": \"admin@testcompany.com\",\n  \"contactPhone\": \"+1234567890\",\n  \"address\": \"123 Test Street\",\n  \"city\": \"Test City\",\n  \"state\": \"Test State\",\n  \"postalCode\": \"12345\",\n  \"country\": \"US\",\n  \"timezone\": \"America/New_York\",\n  \"locale\": \"en-US\",\n  \"currency\": \"USD\",\n  \"marketingConsent\": true,\n  \"acceptTerms\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "register"]
            }
          },
          "response": []
        },
        {
          "name": "2. Register User - Invalid Email",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 400', function () {",
                  "    pm.response.to.have.status(400);",
                  "});",
                  "",
                  "pm.test('Error message is present', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('message');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"invalid-email\",\n  \"password\": \"SuperAdmin123!\",\n  \"firstName\": \"Test\",\n  \"lastName\": \"User\",\n  \"tenantName\": \"Test Company\",\n  \"acceptTerms\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "register"]
            }
          },
          "response": []
        },
        {
          "name": "3. Register User - Weak Password",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 400', function () {",
                  "    pm.response.to.have.status(400);",
                  "});",
                  "",
                  "pm.test('Password validation error', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.message).to.include('password');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"superadmin@example.com\",\n  \"password\": \"123\",\n  \"firstName\": \"Test\",\n  \"lastName\": \"User\",\n  \"tenantName\": \"Test Company\",\n  \"acceptTerms\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "register"]
            }
          },
          "response": []
        },
        {
          "name": "4. Login User - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has access token', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('accessToken');",
                  "    pm.expect(response.accessToken).to.be.a('string');",
                  "});",
                  "",
                  "pm.test('Response has refresh token', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('refreshToken');",
                  "    pm.expect(response.refreshToken).to.be.a('string');",
                  "});",
                  "",
                  "pm.test('Response has user data', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('user');",
                  "    pm.expect(response.user).to.have.property('id');",
                  "    pm.expect(response.user).to.have.property('email');",
                  "});",
                  "",
                  "pm.test('Response has expires in', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('expiresIn');",
                  "    pm.expect(response.expiresIn).to.be.a('number');",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('accessToken', response.accessToken);",
                  "    pm.environment.set('refreshToken', response.refreshToken);",
                  "    pm.environment.set('userId', response.user.id);",
                  "    pm.environment.set('tenantId', response.user.tenantId);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{testEmail}}\",\n  \"password\": \"{{testPassword}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "login"]
            }
          },
          "response": []
        },
        {
          "name": "16. Login User - Invalid Credentials",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 401', function () {",
                  "    pm.response.to.have.status(401);",
                  "});",
                  "",
                  "pm.test('Error message is present', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('message');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"wrong@example.com\",\n  \"password\": \"WrongPassword123!\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "login"]
            }
          },
          "response": []
        },
        {
          "name": "16. Get Profile - Authenticated",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has user data', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('id');",
                  "    pm.expect(response).to.have.property('email');",
                  "    pm.expect(response).to.have.property('firstName');",
                  "    pm.expect(response).to.have.property('lastName');",
                  "});",
                  "",
                  "pm.test('User ID matches', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.id).to.eql(pm.environment.get('userId'));",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/auth/profile",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "profile"]
            }
          },
          "response": []
        },
        {
          "name": "16. Get Profile - Unauthenticated",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 401', function () {",
                  "    pm.response.to.have.status(401);",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/auth/profile",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "profile"]
            }
          },
          "response": []
        },
        {
          "name": "16. Refresh Token - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has new access token', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('accessToken');",
                  "    pm.expect(response.accessToken).to.be.a('string');",
                  "});",
                  "",
                  "pm.test('Response has new refresh token', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('refreshToken');",
                  "    pm.expect(response.refreshToken).to.be.a('string');",
                  "});",
                  "",
                  "pm.test('New tokens are different from old ones', function () {",
                  "    const response = pm.response.json();",
                  "    const oldAccessToken = pm.environment.get('accessToken');",
                  "    const oldRefreshToken = pm.environment.get('refreshToken');",
                  "    pm.expect(response.accessToken).to.not.eql(oldAccessToken);",
                  "    pm.expect(response.refreshToken).to.not.eql(oldRefreshToken);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('accessToken', response.accessToken);",
                  "    pm.environment.set('refreshToken', response.refreshToken);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refreshToken\": \"{{refreshToken}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/refresh",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "refresh"]
            }
          },
          "response": []
        },
        {
          "name": "16. Refresh Token - Invalid Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 401', function () {",
                  "    pm.response.to.have.status(401);",
                  "});",
                  "",
                  "pm.test('Error message is present', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('message');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refreshToken\": \"invalid-token\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/refresh",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "refresh"]
            }
          },
          "response": []
        },
        {
          "name": "16. Logout - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Logout message is present', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('message');",
                  "    pm.expect(response.message).to.include('successfully');",
                  "});",
                  "",
                  "// Clear tokens after logout",
                  "pm.environment.set('accessToken', '');",
                  "pm.environment.set('refreshToken', '');"
                ]
              }
            }
          ]
        },
        {
          "name": "16. Forgot Password - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Success message is present', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('message');",
                  "    pm.expect(response.message).to.include('Password reset email sent');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{testEmail}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/forgot-password",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "forgot-password"]
            }
          },
          "response": []
        },
        {
          "name": "16. Forgot Password - Invalid Email",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 400', function () {",
                  "    pm.response.to.have.status(400);",
                  "});",
                  "",
                  "pm.test('Error message is present', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('message');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"invalid-email\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/forgot-password",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "forgot-password"]
            }
          },
          "response": []
        },
        {
          "name": "16. Reset Password - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Success message is present', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('message');",
                  "    pm.expect(response).to.have.property('status');",
                  "    pm.expect(response.message).to.include('Password reset successfully');",
                  "    pm.expect(response.status).to.eql('success');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"token\": \"valid-reset-token-here\",\n  \"newPassword\": \"NewSuperAdmin123!\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/reset-password",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "reset-password"]
            }
          },
          "response": []
        },
        {
          "name": "16. Reset Password - Invalid Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 400', function () {",
                  "    pm.response.to.have.status(400);",
                  "});",
                  "",
                  "pm.test('Error message is present', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('message');",
                  "    pm.expect(response.message).to.include('Invalid reset token');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"token\": \"invalid-token\",\n  \"newPassword\": \"NewSuperAdmin123!\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/reset-password",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "reset-password"]
            }
          },
          "response": []
        },
        {
          "name": "16. Reset Password - Weak Password",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 400', function () {",
                  "    pm.response.to.have.status(400);",
                  "});",
                  "",
                  "pm.test('Validation error is present', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('message');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"token\": \"valid-reset-token-here\",\n  \"newPassword\": \"weak\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/reset-password",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "reset-password"]
            }
          },
          "response": []
        },
        {
          "name": "16. Logout - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Logout successful', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('message');",
                  "    pm.expect(response.message).to.include('Logged out successfully');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refreshToken\": \"{{refreshToken}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/logout",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "logout"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Multi-Factor Authentication Tests",
      "item": [
        {
          "name": "1. Setup MFA - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Response has required MFA setup fields', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('secret');",
                  "    pm.expect(response).to.have.property('qrCode');",
                  "    pm.expect(response).to.have.property('backupCodes');",
                  "    pm.expect(response.backupCodes).to.be.an('array');",
                  "});",
                  "",
                  "pm.test('Secret is a valid base32 string', function () {",
                  "    const response = pm.response.json();",
                  "    const base32Regex = /^[A-Z2-7]+=*$/;",
                  "    pm.expect(response.secret).to.match(base32Regex);",
                  "});",
                  "",
                  "pm.test('QR code is a valid data URL', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.qrCode).to.match(/^data:image\\/png;base64,/);",
                  "});",
                  "",
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('mfaSecret', response.secret);",
                  "    pm.environment.set('mfaBackupCodes', JSON.stringify(response.backupCodes));",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": \"{{userId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/mfa/setup",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "mfa", "setup"]
            }
          },
          "response": []
        },
        {
          "name": "2. Setup MFA - Unauthorized",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 401', function () {",
                  "    pm.response.to.have.status(401);",
                  "});",
                  "",
                  "pm.test('Error message is present', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('message');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": \"{{userId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/mfa/setup",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "mfa", "setup"]
            }
          },
          "response": []
        },
        {
          "name": "3. Enable MFA - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Success message is present', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('message');",
                  "    pm.expect(response.message).to.include('enabled successfully');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"token\": \"123456\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/mfa/enable",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "mfa", "enable"]
            }
          },
          "response": []
        },
        {
          "name": "4. Enable MFA - Invalid Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 400', function () {",
                  "    pm.response.to.have.status(400);",
                  "});",
                  "",
                  "pm.test('Error message is present', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('message');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"token\": \"000000\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/mfa/enable",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "mfa", "enable"]
            }
          },
          "response": []
        },
        {
          "name": "16. Get MFA Status - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has MFA status fields', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('isEnabled');",
                  "    pm.expect(response).to.have.property('isVerified');",
                  "    pm.expect(response).to.have.property('backupCodesRemaining');",
                  "    pm.expect(response.isEnabled).to.be.a('boolean');",
                  "    pm.expect(response.isVerified).to.be.a('boolean');",
                  "    pm.expect(response.backupCodesRemaining).to.be.a('number');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/auth/mfa/status",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "mfa", "status"]
            }
          },
          "response": []
        },
        {
          "name": "16. Verify MFA - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has verification result', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('isValid');",
                  "    pm.expect(response).to.have.property('message');",
                  "    pm.expect(response.isValid).to.be.a('boolean');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"token\": \"123456\",\n  \"userId\": \"{{userId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/mfa/verify",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "mfa", "verify"]
            }
          },
          "response": []
        },
        {
          "name": "16. Verify MFA - Invalid Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Verification fails with invalid token', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.isValid).to.be.false;",
                  "    pm.expect(response.message).to.include('Invalid');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"token\": \"000000\",\n  \"userId\": \"{{userId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/mfa/verify",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "mfa", "verify"]
            }
          },
          "response": []
        },
        {
          "name": "16. Regenerate Backup Codes - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has new backup codes', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('backupCodes');",
                  "    pm.expect(response.backupCodes).to.be.an('array');",
                  "    pm.expect(response.backupCodes.length).to.be.greaterThan(0);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('mfaBackupCodes', JSON.stringify(response.backupCodes));",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"token\": \"123456\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/mfa/backup-codes/regenerate",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "mfa", "backup-codes", "regenerate"]
            }
          },
          "response": []
        },
        {
          "name": "16. Disable MFA - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Success message is present', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('message');",
                  "    pm.expect(response.message).to.include('disabled successfully');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"token\": \"123456\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/mfa/disable",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "mfa", "disable"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Account Recovery Tests",
      "item": [
        {
          "name": "1. Initiate Account Recovery - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Success message is present', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('message');",
                  "    pm.expect(response.message).to.include('recovery email sent');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{testEmail}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/recovery/initiate",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "recovery", "initiate"]
            }
          },
          "response": []
        },
        {
          "name": "2. Initiate Account Recovery - Invalid Email",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 400', function () {",
                  "    pm.response.to.have.status(400);",
                  "});",
                  "",
                  "pm.test('Error message is present', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('message');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"invalid-email\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/recovery/initiate",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "recovery", "initiate"]
            }
          },
          "response": []
        },
        {
          "name": "3. Initiate Account Recovery - Non-existent User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 404', function () {",
                  "    pm.response.to.have.status(404);",
                  "});",
                  "",
                  "pm.test('Error message is present', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('message');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"nonexistent@example.com\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/recovery/initiate",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "recovery", "initiate"]
            }
          },
          "response": []
        },
        {
          "name": "4. Verify Account Recovery - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has required fields', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('recoverySessionToken');",
                  "    pm.expect(response).to.have.property('message');",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('recoverySessionToken', response.recoverySessionToken);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"recoveryToken\": \"{{recoveryToken}}\",\n  \"backupCode\": \"{{recoveryBackupCode}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/recovery/verify",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "recovery", "verify"]
            }
          },
          "response": []
        },
        {
          "name": "16. Verify Account Recovery - Invalid Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 400', function () {",
                  "    pm.response.to.have.status(400);",
                  "});",
                  "",
                  "pm.test('Error message is present', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('message');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"recoveryToken\": \"invalid-token\",\n  \"backupCode\": \"12345678\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/recovery/verify",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "recovery", "verify"]
            }
          },
          "response": []
        },
        {
          "name": "16. Verify Account Recovery - Invalid Backup Code",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 400', function () {",
                  "    pm.response.to.have.status(400);",
                  "});",
                  "",
                  "pm.test('Error message is present', function () {",
                  "    const response = pm.response.json();",
                  "    pm.response.to.have.status(400);",
                  "    pm.expect(response).to.have.property('message');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"recoveryToken\": \"{{recoveryToken}}\",\n  \"backupCode\": \"invalid-code\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/recovery/verify",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "recovery", "verify"]
            }
          },
          "response": []
        },
        {
          "name": "16. Complete Account Recovery - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has required fields', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('secret');",
                  "    pm.expect(response).to.have.property('qrCode');",
                  "    pm.expect(response).to.have.property('backupCodes');",
                  "    pm.expect(response.backupCodes).to.be.an('array');",
                  "});",
                  "",
                  "pm.test('Secret is a valid base32 string', function () {",
                  "    const response = pm.response.json();",
                  "    const base32Regex = /^[A-Z2-7]+=*$/;",
                  "    pm.expect(response.secret).to.match(base32Regex);",
                  "});",
                  "",
                  "pm.test('QR code is a valid data URL', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.qrCode).to.match(/^data:image\\/png;base64,/);",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"recoverySessionToken\": \"{{recoverySessionToken}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/recovery/complete",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "recovery", "complete"]
            }
          },
          "response": []
        },
        {
          "name": "16. Complete Account Recovery - Invalid Session Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 400', function () {",
                  "    pm.response.to.have.status(400);",
                  "});",
                  "",
                  "pm.test('Error message is present', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('message');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"recoverySessionToken\": \"invalid-session-token\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/recovery/complete",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "recovery", "complete"]
            }
          },
          "response": []
        },
        {
          "name": "16. Get Recovery Status - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has required fields', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('isValid');",
                  "    pm.expect(response).to.have.property('remainingAttempts');",
                  "    pm.expect(response).to.have.property('expiresAt');",
                  "});",
                  "",
                  "pm.test('Status is valid', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.isValid).to.be.true;",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/auth/recovery/status?recoverySessionToken={{recoverySessionToken}}",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "recovery", "status"],
              "query": [
                {
                  "key": "recoverySessionToken",
                  "value": "{{recoverySessionToken}}"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "16. Get Recovery Status - Invalid Session Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 400', function () {",
                  "    pm.response.to.have.status(400);",
                  "});",
                  "",
                  "pm.test('Error message is present', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('message');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/auth/recovery/status?recoverySessionToken=invalid-session-token",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "recovery", "status"],
              "query": [
                {
                  "key": "recoverySessionToken",
                  "value": "invalid-session-token"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "16. Attempt Backup Code - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has required fields', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('isValid');",
                  "    pm.expect(response).to.have.property('remainingAttempts');",
                  "});",
                  "",
                  "pm.test('Backup code is valid', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.isValid).to.be.true;",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"recoveryToken\": \"{{recoveryToken}}\",\n  \"backupCode\": \"{{recoveryBackupCode}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/recovery/attempt",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "recovery", "attempt"]
            }
          },
          "response": []
        },
        {
          "name": "16. Attempt Backup Code - Invalid Code",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has required fields', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('isValid');",
                  "    pm.expect(response).to.have.property('remainingAttempts');",
                  "});",
                  "",
                  "pm.test('Backup code is invalid', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.isValid).to.be.false;",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"recoveryToken\": \"{{recoveryToken}}\",\n  \"backupCode\": \"invalid-code\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/recovery/attempt",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "recovery", "attempt"]
            }
          },
          "response": []
        },
        {
          "name": "16. Attempt Backup Code - Exceeded Attempts",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 429', function () {",
                  "    pm.response.to.have.status(429);",
                  "});",
                  "",
                  "pm.test('Error message is present', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('message');",
                  "    pm.expect(response.message).to.include('too many attempts');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"recoveryToken\": \"{{recoveryToken}}\",\n  \"backupCode\": \"wrong-code-1\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/recovery/attempt",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "recovery", "attempt"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Session Management Tests",
      "item": [
        {
          "name": "1. Get All Sessions - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has required fields', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('sessions');",
                  "    pm.expect(response).to.have.property('total');",
                  "    pm.expect(response).to.have.property('activeCount');",
                  "    pm.expect(response).to.have.property('trustedCount');",
                  "});",
                  "",
                  "pm.test('Sessions array is present', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.sessions).to.be.an('array');",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.sessions && response.sessions.length > 0) {",
                  "        pm.environment.set('sessionId', response.sessions[0].id);",
                  "        pm.environment.set('currentSessionId', response.sessions[0].id);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/sessions",
              "host": ["{{baseUrl}}"],
              "path": ["sessions"]
            }
          },
          "response": []
        },
        {
          "name": "2. Get Active Sessions - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response is an array', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.be.an('array');",
                  "});",
                  "",
                  "pm.test('All sessions are active', function () {",
                  "    const response = pm.response.json();",
                  "    response.forEach(session => {",
                  "        pm.expect(session.isActive).to.be.true;",
                  "    });",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/sessions/active",
              "host": ["{{baseUrl}}"],
              "path": ["sessions", "active"]
            }
          },
          "response": []
        },
        {
          "name": "3. Get Session by ID - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has required fields', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('id');",
                  "    pm.expect(response).to.have.property('userId');",
                  "    pm.expect(response).to.have.property('deviceName');",
                  "    pm.expect(response).to.have.property('deviceType');",
                  "    pm.expect(response).to.have.property('status');",
                  "    pm.expect(response).to.have.property('isActive');",
                  "});",
                  "",
                  "pm.test('Session ID matches request', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.id).to.eql(pm.environment.get('sessionId'));",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/sessions/{{sessionId}}",
              "host": ["{{baseUrl}}"],
              "path": ["sessions", "{{sessionId}}"]
            }
          },
          "response": []
        },
        {
          "name": "4. Update Session - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Session is updated', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.deviceName).to.eql('Updated Device Name');",
                  "    pm.expect(response.isTrusted).to.be.true;",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"deviceName\": \"Updated Device Name\",\n  \"isTrusted\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/sessions/{{sessionId}}",
              "host": ["{{baseUrl}}"],
              "path": ["sessions", "{{sessionId}}"]
            }
          },
          "response": []
        },
        {
          "name": "16. Mark Device as Trusted - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Device is marked as trusted', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.isTrusted).to.be.true;",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/sessions/{{sessionId}}/trust",
              "host": ["{{baseUrl}}"],
              "path": ["sessions", "{{sessionId}}", "trust"]
            }
          },
          "response": []
        },
        {
          "name": "16. Update Session Activity - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/sessions/{{sessionId}}/activity",
              "host": ["{{baseUrl}}"],
              "path": ["sessions", "{{sessionId}}", "activity"]
            }
          },
          "response": []
        },
        {
          "name": "16. Extend Session - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Session expiration is extended', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('expiresAt');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"additionalMinutes\": 60\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/sessions/{{sessionId}}/extend",
              "host": ["{{baseUrl}}"],
              "path": ["sessions", "{{sessionId}}", "extend"]
            }
          },
          "response": []
        },
        {
          "name": "16. Get Session Statistics - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has statistics fields', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('total');",
                  "    pm.expect(response).to.have.property('active');",
                  "    pm.expect(response).to.have.property('trusted');",
                  "    pm.expect(response).to.have.property('suspicious');",
                  "    pm.expect(response).to.have.property('expired');",
                  "    pm.expect(response).to.have.property('revoked');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/sessions/stats/summary",
              "host": ["{{baseUrl}}"],
              "path": ["sessions", "stats", "summary"]
            }
          },
          "response": []
        },
        {
          "name": "16. Mark Session as Suspicious - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Session is marked as suspicious', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.status).to.eql('suspicious');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/sessions/{{sessionId}}/suspicious",
              "host": ["{{baseUrl}}"],
              "path": ["sessions", "{{sessionId}}", "suspicious"]
            }
          },
          "response": []
        },
        {
          "name": "16. Revoke Other Sessions - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 204', function () {",
                  "    pm.response.to.have.status(204);",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-session-id",
                "value": "{{currentSessionId}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reason\": \"Security concern\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/sessions/others",
              "host": ["{{baseUrl}}"],
              "path": ["sessions", "others"]
            }
          },
          "response": []
        },
        {
          "name": "16. Revoke Session - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 204', function () {",
                  "    pm.response.to.have.status(204);",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reason\": \"Security concern\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/sessions/{{sessionId}}",
              "host": ["{{baseUrl}}"],
              "path": ["sessions", "{{sessionId}}"]
            }
          },
          "response": []
        },
        {
          "name": "16. Revoke All Sessions - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 204', function () {",
                  "    pm.response.to.have.status(204);",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reason\": \"Logout all devices\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/sessions",
              "host": ["{{baseUrl}}"],
              "path": ["sessions"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Health Check Tests",
      "item": [
        {
          "name": "API Health Check",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response time is less than 200ms', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(200);",
                  "});",
                  "",
                  "pm.test('Response has health status', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('status');",
                  "    pm.expect(response.status).to.eql('ok');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/health",
              "host": ["{{baseUrl}}"],
              "path": ["health"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "RBAC Setup - Authentication",
      "item": [
        {
          "name": "Login to Get Token for RBAC Tests",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has authentication tokens', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('accessToken');",
                  "    pm.expect(response).to.have.property('refreshToken');",
                  "    pm.expect(response).to.have.property('user');",
                  "});",
                  "",
                  "// Set authentication variables",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('accessToken', response.accessToken);",
                  "    pm.collectionVariables.set('userId', response.user.id);",
                  "    pm.collectionVariables.set('tenantId', response.user.tenantId);",
                  "}",
                  "",
                  "// Set default parent role ID (Admin role)",
                  "pm.collectionVariables.set('parentRoleId', 'admin-role-id');"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"admin@example.com\",\n  \"password\": \"AdminPassword123!\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "login"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "RBAC Permission Management Tests",
      "item": [
        {
          "name": "1. Create Custom Permission",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Permission created successfully', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.name).to.equal('files:manage');",
                  "    pm.expect(response.resource).to.equal('files');",
                  "    pm.expect(response.action).to.equal('manage');",
                  "    pm.expect(response.scope).to.equal('tenant');",
                  "    pm.expect(response.isSystem).to.be.false;",
                  "    pm.expect(response.isActive).to.be.true;",
                  "});",
                  "",
                  "// Store permission ID",
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('permissionId', response.id);",
                  "    pm.collectionVariables.set('permissionId1', response.id);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"files:manage\",\n  \"description\": \"File management permission\",\n  \"resource\": \"files\",\n  \"action\": \"manage\",\n  \"scope\": \"tenant\",\n  \"conditions\": {\n    \"requireApproval\": true\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/permissions",
              "host": ["{{baseUrl}}"],
              "path": ["permissions"]
            }
          },
          "response": []
        },
        {
          "name": "2. Create Second Permission",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Second permission created successfully', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.name).to.equal('files:read');",
                  "    pm.expect(response.resource).to.equal('files');",
                  "    pm.expect(response.action).to.equal('read');",
                  "    pm.expect(response.scope).to.equal('tenant');",
                  "});",
                  "",
                  "// Store second permission ID",
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('permissionId2', response.id);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"files:read\",\n  \"description\": \"File read permission\",\n  \"resource\": \"files\",\n  \"action\": \"read\",\n  \"scope\": \"tenant\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/permissions",
              "host": ["{{baseUrl}}"],
              "path": ["permissions"]
            }
          },
          "response": []
        },
        {
          "name": "3. Get All Permissions",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Permissions list retrieved successfully', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.permissions).to.be.an('array');",
                  "    pm.expect(response.total).to.be.a('number');",
                  "    pm.expect(response.page).to.equal(1);",
                  "    pm.expect(response.limit).to.equal(50);",
                  "});",
                  "",
                  "pm.test('File permissions exist in list', function () {",
                  "    const response = pm.response.json();",
                  "    const filePermissions = response.permissions.filter(p => p.name.startsWith('files:'));",
                  "    pm.expect(filePermissions.length).to.be.at.least(2);",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/permissions?page=1&limit=50",
              "host": ["{{baseUrl}}"],
              "path": ["permissions"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "50"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "4. Get Permission by ID",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Permission retrieved successfully', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.id).to.equal(pm.collectionVariables.get('permissionId'));",
                  "    pm.expect(response.name).to.equal('files:manage');",
                  "    pm.expect(response.resource).to.equal('files');",
                  "    pm.expect(response.action).to.equal('manage');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/permissions/{{permissionId}}",
              "host": ["{{baseUrl}}"],
              "path": ["permissions", "{{permissionId}}"]
            }
          },
          "response": []
        },
        {
          "name": "16. Update Permission",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Permission updated successfully', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.name).to.equal('files:manage:enhanced');",
                  "    pm.expect(response.description).to.equal('Enhanced file management permission');",
                  "    pm.expect(response.scope).to.equal('team');",
                  "    pm.expect(response.isActive).to.be.true;",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"files:manage:enhanced\",\n  \"description\": \"Enhanced file management permission\",\n  \"scope\": \"team\",\n  \"conditions\": {\n    \"requireAudit\": true\n  },\n  \"isActive\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/permissions/{{permissionId}}",
              "host": ["{{baseUrl}}"],
              "path": ["permissions", "{{permissionId}}"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "RBAC Role Management Tests",
      "item": [
        {
          "name": "1. Create Custom Role",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Role created successfully', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.name).to.equal('Team Lead');",
                  "    pm.expect(response.description).to.equal('Team lead role with enhanced permissions');",
                  "    pm.expect(response.type).to.equal('custom');",
                  "    pm.expect(response.level).to.equal(3);",
                  "    pm.expect(response.isSystem).to.be.false;",
                  "    pm.expect(response.isActive).to.be.true;",
                  "    pm.expect(response.permissions).to.be.an('array');",
                  "    pm.expect(response.totalPermissions).to.be.a('number');",
                  "});",
                  "",
                  "// Store role ID",
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('roleId', response.id);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Team Lead\",\n  \"description\": \"Team lead role with enhanced permissions\",\n  \"type\": \"custom\",\n  \"level\": 3,\n  \"parentRoleId\": \"{{parentRoleId}}\",\n  \"metadata\": {\n    \"canManageTeam\": true,\n    \"canViewReports\": true\n  },\n  \"permissionIds\": [\n    \"{{permissionId1}}\",\n    \"{{permissionId2}}\"\n  ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/roles",
              "host": ["{{baseUrl}}"],
              "path": ["roles"]
            }
          },
          "response": []
        },
        {
          "name": "2. Get All Roles",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Roles list retrieved successfully', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.roles).to.be.an('array');",
                  "    pm.expect(response.total).to.be.a('number');",
                  "    pm.expect(response.page).to.equal(1);",
                  "    pm.expect(response.limit).to.equal(50);",
                  "});",
                  "",
                  "pm.test('Custom role exists in list', function () {",
                  "    const response = pm.response.json();",
                  "    const teamLeadRole = response.roles.find(r => r.name === 'Team Lead');",
                  "    pm.expect(teamLeadRole).to.exist;",
                  "    pm.expect(teamLeadRole.type).to.equal('custom');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/roles?page=1&limit=50",
              "host": ["{{baseUrl}}"],
              "path": ["roles"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "50"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "3. Get Role by ID",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Role retrieved successfully', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.id).to.equal(pm.collectionVariables.get('roleId'));",
                  "    pm.expect(response.name).to.equal('Team Lead');",
                  "    pm.expect(response.type).to.equal('custom');",
                  "    pm.expect(response.level).to.equal(3);",
                  "    pm.expect(response.permissions).to.be.an('array');",
                  "    pm.expect(response.totalPermissions).to.be.at.least(2);",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/roles/{{roleId}}",
              "host": ["{{baseUrl}}"],
              "path": ["roles", "{{roleId}}"]
            }
          },
          "response": []
        },
        {
          "name": "4. Update Role",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Role updated successfully', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.name).to.equal('Senior Team Lead');",
                  "    pm.expect(response.description).to.equal('Senior team lead with additional privileges');",
                  "    pm.expect(response.level).to.equal(2);",
                  "    pm.expect(response.isActive).to.be.true;",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Senior Team Lead\",\n  \"description\": \"Senior team lead with additional privileges\",\n  \"level\": 2,\n  \"metadata\": {\n    \"canManageTeam\": true,\n    \"canViewReports\": true,\n    \"canManageBudget\": true\n  },\n  \"isActive\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/roles/{{roleId}}",
              "host": ["{{baseUrl}}"],
              "path": ["roles", "{{roleId}}"]
            }
          },
          "response": []
        },
        {
          "name": "16. Assign Additional Permissions to Role",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Permissions assigned successfully', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.permissions).to.be.an('array');",
                  "    pm.expect(response.totalPermissions).to.be.at.least(3);",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"permissionIds\": [\n    \"{{permissionId3}}\"\n  ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/roles/{{roleId}}/permissions",
              "host": ["{{baseUrl}}"],
              "path": ["roles", "{{roleId}}", "permissions"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "RBAC User Role Management Tests",
      "item": [
        {
          "name": "1. Assign Role to User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Role assigned successfully', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('message');",
                  "    pm.expect(response.message).to.include('Role assigned successfully');",
                  "    pm.expect(response.userId).to.equal(pm.collectionVariables.get('userId'));",
                  "    pm.expect(response.roleId).to.equal(pm.collectionVariables.get('roleId'));",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"roleId\": \"{{roleId}}\",\n  \"metadata\": {\n    \"assignedBy\": \"{{userId}}\",\n    \"reason\": \"Promotion to team lead\",\n    \"effectiveDate\": \"2024-01-01\"\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/roles/users/{{userId}}/roles",
              "host": ["{{baseUrl}}"],
              "path": ["roles", "users", "{{userId}}", "roles"]
            }
          },
          "response": []
        },
        {
          "name": "2. Get User Roles",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('User roles retrieved successfully', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.userRoles).to.be.an('array');",
                  "    pm.expect(response.total).to.be.a('number');",
                  "    pm.expect(response.total).to.be.at.least(1);",
                  "});",
                  "",
                  "pm.test('Assigned role exists in user roles', function () {",
                  "    const response = pm.response.json();",
                  "    const assignedRole = response.userRoles.find(ur => ur.roleId === pm.collectionVariables.get('roleId'));",
                  "    pm.expect(assignedRole).to.exist;",
                  "    pm.expect(assignedRole.roleName).to.equal('Senior Team Lead');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/roles/users/{{userId}}/roles",
              "host": ["{{baseUrl}}"],
              "path": ["roles", "users", "{{userId}}", "roles"]
            }
          },
          "response": []
        },
        {
          "name": "3. Get User Permissions",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('User permissions retrieved successfully', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.permissions).to.be.an('array');",
                  "    pm.expect(response.userId).to.equal(pm.collectionVariables.get('userId'));",
                  "});",
                  "",
                  "pm.test('User has file permissions', function () {",
                  "    const response = pm.response.json();",
                  "    const filePermissions = response.permissions.filter(p => p.startsWith('files:'));",
                  "    pm.expect(filePermissions.length).to.be.at.least(2);",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/roles/users/{{userId}}/permissions",
              "host": ["{{baseUrl}}"],
              "path": ["roles", "users", "{{userId}}", "permissions"]
            }
          },
          "response": []
        },
        {
          "name": "4. Check User Permission - Has Access",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Permission check successful', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('hasPermission');",
                  "    pm.expect(response).to.have.property('resource');",
                  "    pm.expect(response).to.have.property('action');",
                  "    pm.expect(response).to.have.property('scope');",
                  "    pm.expect(response).to.have.property('userId');",
                  "    pm.expect(response).to.have.property('grantedByRoles');",
                  "});",
                  "",
                  "pm.test('User has files:manage permission', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.hasPermission).to.be.true;",
                  "    pm.expect(response.resource).to.equal('files');",
                  "    pm.expect(response.action).to.equal('manage');",
                  "    pm.expect(response.scope).to.equal('tenant');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"resource\": \"files\",\n  \"action\": \"manage\",\n  \"scope\": \"tenant\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/roles/users/{{userId}}/permissions/check",
              "host": ["{{baseUrl}}"],
              "path": ["roles", "users", "{{userId}}", "permissions", "check"]
            }
          },
          "response": []
        },
        {
          "name": "16. Check User Permission - No Access",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Permission check indicates no access', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.hasPermission).to.be.false;",
                  "    pm.expect(response.resource).to.equal('admin');",
                  "    pm.expect(response.action).to.equal('delete');",
                  "    pm.expect(response.scope).to.equal('global');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"resource\": \"admin\",\n  \"action\": \"delete\",\n  \"scope\": \"global\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/roles/users/{{userId}}/permissions/check",
              "host": ["{{baseUrl}}"],
              "path": ["roles", "users", "{{userId}}", "permissions", "check"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "RBAC Cleanup Tests",
      "item": [
        {
          "name": "1. Remove Role from User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Role removed successfully', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('message');",
                  "    pm.expect(response.message).to.include('Role removed successfully');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/roles/users/{{userId}}/roles/{{roleId}}",
              "host": ["{{baseUrl}}"],
              "path": ["roles", "users", "{{userId}}", "roles", "{{roleId}}"]
            }
          },
          "response": []
        },
        {
          "name": "2. Delete Custom Role",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Role deleted successfully', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('message');",
                  "    pm.expect(response.message).to.include('Role deleted successfully');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/roles/{{roleId}}",
              "host": ["{{baseUrl}}"],
              "path": ["roles", "{{roleId}}"]
            }
          },
          "response": []
        },
        {
          "name": "3. Delete Custom Permissions",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Permission deleted successfully', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('message');",
                  "    pm.expect(response.message).to.include('Permission deleted successfully');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/permissions/{{permissionId}}",
              "host": ["{{baseUrl}}"],
              "path": ["permissions", "{{permissionId}}"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Tenant Management Tests",
      "item": [
        {
          "name": "1. Create Tenant - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Response has tenant data', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('id');",
                  "    pm.expect(response).to.have.property('name');",
                  "    pm.expect(response).to.have.property('domain');",
                  "    pm.expect(response).to.have.property('plan');",
                  "    pm.expect(response).to.have.property('isActive');",
                  "});",
                  "",
                  "pm.test('Tenant is active by default', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.isActive).to.be.true;",
                  "});",
                  "",
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('testTenantId', response.id);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Test Tenant\",\n  \"domain\": \"test-tenant.com\",\n  \"plan\": \"basic\",\n  \"maxUsers\": 10,\n  \"maxStorage\": 1024,\n  \"isActive\": true,\n  \"features\": [\"mfa_enforcement\", \"email_templates\"],\n  \"settings\": {\n    \"timezone\": \"America/New_York\",\n    \"locale\": \"en-US\",\n    \"currency\": \"USD\"\n  },\n  \"metadata\": {\n    \"industry\": \"technology\",\n    \"size\": \"small\"\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/tenants",
              "host": ["{{baseUrl}}"],
              "path": ["tenants"]
            }
          },
          "response": []
        },
        {
          "name": "2. Get All Tenants",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has tenants array', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('tenants');",
                  "    pm.expect(response.tenants).to.be.an('array');",
                  "});",
                  "",
                  "pm.test('Response has total count', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('total');",
                  "    pm.expect(response.total).to.be.a('number');",
                  "});",
                  "",
                  "pm.test('At least one tenant exists', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.total).to.be.greaterThan(0);",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/tenants?page=1&limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["tenants"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "3. Get Tenant Statistics",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has statistics data', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('totalTenants');",
                  "    pm.expect(response).to.have.property('activeTenants');",
                  "    pm.expect(response).to.have.property('trialTenants');",
                  "    pm.expect(response).to.have.property('verifiedTenants');",
                  "    pm.expect(response).to.have.property('tenantsByPlan');",
                  "    pm.expect(response).to.have.property('recentTenants');",
                  "    pm.expect(response).to.have.property('growthRate');",
                  "});",
                  "",
                  "pm.test('Statistics are valid numbers', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.totalTenants).to.be.a('number');",
                  "    pm.expect(response.activeTenants).to.be.a('number');",
                  "    pm.expect(response.growthRate).to.be.a('number');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/tenants/statistics",
              "host": ["{{baseUrl}}"],
              "path": ["tenants", "statistics"]
            }
          },
          "response": []
        },
        {
          "name": "4. Get Tenant by ID",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has tenant data', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('id');",
                  "    pm.expect(response).to.have.property('name');",
                  "    pm.expect(response).to.have.property('domain');",
                  "    pm.expect(response).to.have.property('plan');",
                  "    pm.expect(response).to.have.property('isActive');",
                  "});",
                  "",
                  "pm.test('Tenant ID matches request', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.id).to.equal(pm.environment.get('testTenantId'));",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/tenants/{{testTenantId}}",
              "host": ["{{baseUrl}}"],
              "path": ["tenants", "{{testTenantId}}"]
            }
          },
          "response": []
        },
        {
          "name": "16. Update Tenant",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has updated tenant data', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('id');",
                  "    pm.expect(response).to.have.property('name');",
                  "    pm.expect(response).to.have.property('plan');",
                  "    pm.expect(response.name).to.equal('Updated Test Tenant');",
                  "    pm.expect(response.plan).to.equal('premium');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Updated Test Tenant\",\n  \"plan\": \"premium\",\n  \"maxUsers\": 50,\n  \"maxStorage\": 2048,\n  \"isActive\": true,\n  \"features\": [\"mfa_enforcement\", \"email_templates\", \"advanced_analytics\"],\n  \"settings\": {\n    \"timezone\": \"America/New_York\",\n    \"locale\": \"en-US\",\n    \"currency\": \"USD\"\n  },\n  \"metadata\": {\n    \"industry\": \"technology\",\n    \"size\": \"medium\"\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/tenants/{{testTenantId}}",
              "host": ["{{baseUrl}}"],
              "path": ["tenants", "{{testTenantId}}"]
            }
          },
          "response": []
        },
        {
          "name": "16. Get Tenant Usage",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has usage summary', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('tenantId');",
                  "    pm.expect(response).to.have.property('tenantName');",
                  "    pm.expect(response).to.have.property('currentUsage');",
                  "    pm.expect(response).to.have.property('limits');",
                  "    pm.expect(response).to.have.property('usagePercentage');",
                  "    pm.expect(response).to.have.property('isOverLimit');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/tenants/{{testTenantId}}/usage",
              "host": ["{{baseUrl}}"],
              "path": ["tenants", "{{testTenantId}}", "usage"]
            }
          },
          "response": []
        },
        {
          "name": "16. Update Tenant Usage",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has updated usage data', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('tenantId');",
                  "    pm.expect(response).to.have.property('metric');",
                  "    pm.expect(response).to.have.property('value');",
                  "    pm.expect(response).to.have.property('limit');",
                  "    pm.expect(response.metric).to.equal('apiCalls');",
                  "    pm.expect(response.value).to.equal(150);",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"value\": 150,\n  \"limit\": 1000\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/tenants/{{testTenantId}}/usage/apiCalls",
              "host": ["{{baseUrl}}"],
              "path": ["tenants", "{{testTenantId}}", "usage", "apiCalls"]
            }
          },
          "response": []
        },
        {
          "name": "16. Check Feature Enabled",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has enabled status', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('enabled');",
                  "    pm.expect(response.enabled).to.be.a('boolean');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/tenants/{{testTenantId}}/features/ADVANCED_ANALYTICS",
              "host": ["{{baseUrl}}"],
              "path": [
                "tenants",
                "{{testTenantId}}",
                "features",
                "ADVANCED_ANALYTICS"
              ]
            }
          },
          "response": []
        },
        {
          "name": "16. Update Feature Flag",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has updated feature flag', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('id');",
                  "    pm.expect(response).to.have.property('tenantId');",
                  "    pm.expect(response).to.have.property('feature');",
                  "    pm.expect(response).to.have.property('isEnabled');",
                  "    pm.expect(response.feature).to.equal('ADVANCED_ANALYTICS');",
                  "    pm.expect(response.isEnabled).to.be.true;",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"enabled\": true,\n  \"config\": {\n    \"retentionDays\": 30,\n    \"maxQueries\": 1000\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/tenants/{{testTenantId}}/features/ADVANCED_ANALYTICS",
              "host": ["{{baseUrl}}"],
              "path": [
                "tenants",
                "{{testTenantId}}",
                "features",
                "ADVANCED_ANALYTICS"
              ]
            }
          },
          "response": []
        },
        {
          "name": "16. Bulk Update Feature Flags",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Bulk update successful', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(Array.isArray(response)).to.be.true;",
                  "    pm.expect(response.length).to.equal(2);",
                  "});",
                  "",
                  "pm.test('Feature flags updated correctly', function () {",
                  "    const response = pm.response.json();",
                  "    const mfaFlag = response.find(flag => flag.feature === 'MFA_ENFORCEMENT');",
                  "    const ssoFlag = response.find(flag => flag.feature === 'SSO_INTEGRATION');",
                  "    pm.expect(mfaFlag.isEnabled).to.be.true;",
                  "    pm.expect(ssoFlag.isEnabled).to.be.false;",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"updates\": [\n    {\n      \"feature\": \"mfa_enforcement\",\n      \"enabled\": true,\n      \"config\": {\n        \"maxRetries\": 3\n      }\n    },\n    {\n      \"feature\": \"sso_integration\",\n      \"enabled\": false\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/tenants/{{testTenantId}}/features/bulk",
              "host": ["{{baseUrl}}"],
              "path": ["tenants", "{{testTenantId}}", "features", "bulk"]
            }
          },
          "response": []
        },
        {
          "name": "16. Get Feature Flags Statistics",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Statistics response structure', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('total');",
                  "    pm.expect(response).to.have.property('enabled');",
                  "    pm.expect(response).to.have.property('disabled');",
                  "    pm.expect(typeof response.total).to.equal('number');",
                  "    pm.expect(typeof response.enabled).to.equal('number');",
                  "    pm.expect(typeof response.disabled).to.equal('number');",
                  "});",
                  "",
                  "pm.test('Statistics are consistent', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.total).to.equal(response.enabled + response.disabled);",
                  "    pm.expect(response.total).to.be.at.least(0);",
                  "    pm.expect(response.enabled).to.be.at.least(0);",
                  "    pm.expect(response.disabled).to.be.at.least(0);",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/tenants/{{testTenantId}}/features/stats",
              "host": ["{{baseUrl}}"],
              "path": ["tenants", "{{testTenantId}}", "features", "stats"]
            }
          },
          "response": []
        },
        {
          "name": "16. Test Case Insensitive Feature Names",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Case insensitive feature name works', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('enabled');",
                  "    pm.expect(typeof response.enabled).to.equal('boolean');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/tenants/{{testTenantId}}/features/MFA_ENFORCEMENT",
              "host": ["{{baseUrl}}"],
              "path": [
                "tenants",
                "{{testTenantId}}",
                "features",
                "MFA_ENFORCEMENT"
              ]
            }
          },
          "response": []
        },
        {
          "name": "16. Test Invalid Feature Name",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 400', function () {",
                  "    pm.response.to.have.status(400);",
                  "});",
                  "",
                  "pm.test('Error message contains valid features', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.message).to.include('Valid features are:');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"enabled\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/tenants/{{testTenantId}}/features/invalid_feature",
              "host": ["{{baseUrl}}"],
              "path": [
                "tenants",
                "{{testTenantId}}",
                "features",
                "invalid_feature"
              ]
            }
          },
          "response": []
        },
        {
          "name": "16. Delete Tenant",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 204', function () {",
                  "    pm.response.to.have.status(204);",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/tenants/{{testTenantId}}",
              "host": ["{{baseUrl}}"],
              "path": ["tenants", "{{testTenantId}}"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Test Suite - Tenant Switching",
      "item": [
        {
          "name": "Test: Get User Tenant Memberships",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response structure is correct', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('memberships');",
                  "    pm.expect(response).to.have.property('currentTenantId');",
                  "    pm.expect(response).to.have.property('totalCount');",
                  "    pm.expect(response).to.have.property('activeCount');",
                  "    pm.expect(response).to.have.property('pendingCount');",
                  "});",
                  "",
                  "pm.test('User has at least one membership', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.memberships).to.be.an('array');",
                  "    pm.expect(response.memberships.length).to.be.at.least(1);",
                  "    pm.expect(response.totalCount).to.be.at.least(1);",
                  "    pm.expect(response.activeCount).to.be.at.least(1);",
                  "});",
                  "",
                  "pm.test('Membership data structure is valid', function () {",
                  "    const response = pm.response.json();",
                  "    const membership = response.memberships[0];",
                  "    ",
                  "    pm.expect(membership).to.have.property('id');",
                  "    pm.expect(membership).to.have.property('tenant');",
                  "    pm.expect(membership).to.have.property('role');",
                  "    pm.expect(membership).to.have.property('status');",
                  "    pm.expect(membership).to.have.property('isCurrentTenant');",
                  "    pm.expect(membership).to.have.property('isActive');",
                  "    pm.expect(membership).to.have.property('joinedAt');",
                  "    pm.expect(membership).to.have.property('permissions');",
                  "    ",
                  "    // Tenant structure",
                  "    pm.expect(membership.tenant).to.have.property('id');",
                  "    pm.expect(membership.tenant).to.have.property('name');",
                  "    pm.expect(membership.tenant).to.have.property('plan');",
                  "    pm.expect(membership.tenant).to.have.property('features');",
                  "    pm.expect(membership.tenant.features).to.be.an('array');",
                  "    ",
                  "    // Permissions structure",
                  "    pm.expect(membership.permissions).to.be.an('array');",
                  "});",
                  "",
                  "pm.test('Current tenant is correctly identified', function () {",
                  "    const response = pm.response.json();",
                  "    const currentMembership = response.memberships.find(m => m.isCurrentTenant);",
                  "    pm.expect(currentMembership).to.not.be.undefined;",
                  "    pm.expect(currentMembership.tenant.id).to.equal(response.currentTenantId);",
                  "});",
                  "",
                  "// Store data for subsequent tests",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('membershipId', response.memberships[0].id);",
                  "    ",
                  "    // If there's more than one membership, store a target for switching",
                  "    if (response.memberships.length > 1) {",
                  "        const targetMembership = response.memberships.find(m => !m.isCurrentTenant);",
                  "        if (targetMembership) {",
                  "            pm.environment.set('targetTenantId', targetMembership.tenant.id);",
                  "        }",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/tenants/user/memberships",
              "host": ["{{baseUrl}}"],
              "path": ["tenants", "user", "memberships"]
            }
          }
        },
        {
          "name": "Test: Get Current Tenant Context",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response structure is correct', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('success');",
                  "    pm.expect(response).to.have.property('tenantContext');",
                  "    pm.expect(response).to.have.property('membership');",
                  "    pm.expect(response.success).to.be.true;",
                  "});",
                  "",
                  "pm.test('Tenant context is valid', function () {",
                  "    const response = pm.response.json();",
                  "    const context = response.tenantContext;",
                  "    ",
                  "    pm.expect(context).to.have.property('id');",
                  "    pm.expect(context).to.have.property('name');",
                  "    pm.expect(context).to.have.property('plan');",
                  "    pm.expect(context).to.have.property('features');",
                  "    pm.expect(context).to.have.property('settings');",
                  "    pm.expect(context.features).to.be.an('array');",
                  "    pm.expect(context.settings).to.be.an('object');",
                  "});",
                  "",
                  "pm.test('Membership context is valid', function () {",
                  "    const response = pm.response.json();",
                  "    const membership = response.membership;",
                  "    ",
                  "    pm.expect(membership).to.have.property('id');",
                  "    pm.expect(membership).to.have.property('role');",
                  "    pm.expect(membership).to.have.property('status');",
                  "    pm.expect(membership).to.have.property('permissions');",
                  "    pm.expect(membership).to.have.property('joinedAt');",
                  "    pm.expect(membership.permissions).to.be.an('array');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/tenants/current",
              "host": ["{{baseUrl}}"],
              "path": ["tenants", "current"]
            }
          }
        },
        {
          "name": "Test: Verify Tenant Access - Valid",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Access granted for current tenant', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('hasAccess');",
                  "    pm.expect(response.hasAccess).to.be.true;",
                  "});",
                  "",
                  "pm.test('Response contains access details', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('role');",
                  "    pm.expect(response).to.have.property('status');",
                  "    pm.expect(response).to.have.property('permissions');",
                  "    pm.expect(response).to.have.property('tenant');",
                  "    pm.expect(response.permissions).to.be.an('array');",
                  "});",
                  "",
                  "pm.test('Permission checks work correctly', function () {",
                  "    const response = pm.response.json();",
                  "    if (response.permissionChecks) {",
                  "        pm.expect(response.permissionChecks).to.be.an('object');",
                  "        Object.values(response.permissionChecks).forEach(check => {",
                  "            pm.expect(check).to.be.a('boolean');",
                  "        });",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"permissions\": [\"users:read\", \"projects:read\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/tenants/{{tenantId}}/verify-access",
              "host": ["{{baseUrl}}"],
              "path": ["tenants", "{{tenantId}}", "verify-access"]
            }
          }
        },
        {
          "name": "Test: Verify Tenant Access - Invalid Tenant",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Access denied for invalid tenant', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('hasAccess');",
                  "    pm.expect(response.hasAccess).to.be.false;",
                  "});",
                  "",
                  "pm.test('Denial reason provided', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('reason');",
                  "    pm.expect(response.reason).to.be.a('string');",
                  "    pm.expect(response.reason).to.not.be.empty;",
                  "});",
                  "",
                  "pm.test('Empty permissions array for denied access', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('permissions');",
                  "    pm.expect(response.permissions).to.be.an('array');",
                  "    pm.expect(response.permissions).to.be.empty;",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"permissions\": [\"users:read\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/tenants/invalid-tenant-id/verify-access",
              "host": ["{{baseUrl}}"],
              "path": ["tenants", "invalid-tenant-id", "verify-access"]
            }
          }
        },
        {
          "name": "Test: Bulk Verify Tenant Access",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response structure is correct', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('results');",
                  "    pm.expect(response).to.have.property('summary');",
                  "    pm.expect(response.results).to.be.an('object');",
                  "});",
                  "",
                  "pm.test('Summary data is accurate', function () {",
                  "    const response = pm.response.json();",
                  "    const summary = response.summary;",
                  "    ",
                  "    pm.expect(summary).to.have.property('totalChecked');",
                  "    pm.expect(summary).to.have.property('accessGranted');",
                  "    pm.expect(summary).to.have.property('accessDenied');",
                  "    ",
                  "    pm.expect(summary.totalChecked).to.equal(summary.accessGranted + summary.accessDenied);",
                  "    pm.expect(summary.totalChecked).to.be.at.least(2);",
                  "});",
                  "",
                  "pm.test('Individual results are valid', function () {",
                  "    const response = pm.response.json();",
                  "    const results = response.results;",
                  "    ",
                  "    Object.keys(results).forEach(tenantId => {",
                  "        const result = results[tenantId];",
                  "        pm.expect(result).to.have.property('hasAccess');",
                  "        pm.expect(result).to.have.property('permissions');",
                  "        pm.expect(result.hasAccess).to.be.a('boolean');",
                  "        pm.expect(result.permissions).to.be.an('array');",
                  "        ",
                  "        if (!result.hasAccess) {",
                  "            pm.expect(result).to.have.property('reason');",
                  "        }",
                  "    });",
                  "});",
                  "",
                  "pm.test('At least one access granted', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.summary.accessGranted).to.be.at.least(1);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"tenantIds\": [\"{{tenantId}}\", \"invalid-tenant-id\"],\n  \"permissions\": [\"users:read\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/tenants/verify-access/bulk",
              "host": ["{{baseUrl}}"],
              "path": ["tenants", "verify-access", "bulk"]
            }
          }
        },
        {
          "name": "Test: Clear User Cache",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Cache cleared successfully', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('success');",
                  "    pm.expect(response).to.have.property('message');",
                  "    pm.expect(response.success).to.be.true;",
                  "    pm.expect(response.message).to.include('cache cleared');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/tenants/cache/clear",
              "host": ["{{baseUrl}}"],
              "path": ["tenants", "cache", "clear"]
            }
          }
        },
        {
          "name": "Test: Tenant Switching Health Check",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Health check response is valid', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('status');",
                  "    pm.expect(response).to.have.property('service');",
                  "    pm.expect(response).to.have.property('timestamp');",
                  "    pm.expect(response).to.have.property('version');",
                  "    pm.expect(response.status).to.equal('ok');",
                  "    pm.expect(response.service).to.equal('tenant-switching');",
                  "    pm.expect(response.version).to.equal('1.0.0');",
                  "});",
                  "",
                  "pm.test('Timestamp is recent', function () {",
                  "    const response = pm.response.json();",
                  "    const timestamp = new Date(response.timestamp);",
                  "    const now = new Date();",
                  "    const diff = now.getTime() - timestamp.getTime();",
                  "    pm.expect(diff).to.be.below(5000); // Within 5 seconds",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/tenants/health",
              "host": ["{{baseUrl}}"],
              "path": ["tenants", "health"]
            }
          }
        },
        {
          "name": "Test: Response Time - Get Memberships",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Response time is acceptable', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(500);",
                  "});",
                  "",
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/tenants/user/memberships",
              "host": ["{{baseUrl}}"],
              "path": ["tenants", "user", "memberships"]
            }
          }
        },
        {
          "name": "Test: Unauthorized Access",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 401', function () {",
                  "    pm.response.to.have.status(401);",
                  "});",
                  "",
                  "pm.test('Error response has message', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('message');",
                  "    pm.expect(response.message).to.be.a('string');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/tenants/user/memberships",
              "host": ["{{baseUrl}}"],
              "path": ["tenants", "user", "memberships"]
            }
          }
        },
        {
          "name": "Test: Invalid Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 401', function () {",
                  "    pm.response.to.have.status(401);",
                  "});",
                  "",
                  "pm.test('Error response has message', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('message');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer invalid-token-here"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/tenants/user/memberships",
              "host": ["{{baseUrl}}"],
              "path": ["tenants", "user", "memberships"]
            }
          }
        }
      ]
    },
    {
      "name": "User Lifecycle Management Tests",
      "item": [
        {
          "name": "User Registration Tests",
          "item": [
            {
              "name": "Register New User - Success",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"email\": \"newuser@example.com\",\n  \"password\": \"SuperAdmin123!\",\n  \"firstName\": \"John\",\n  \"lastName\": \"Doe\",\n  \"tenantId\": \"{{tenantId}}\",\n  \"role\": \"member\",\n  \"sendEmailVerification\": true,\n  \"sendWelcomeEmail\": true\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/users",
                  "host": ["{{baseUrl}}"],
                  "path": ["users"]
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Status code is 201', function () {",
                      "    pm.response.to.have.status(201);",
                      "});",
                      "",
                      "pm.test('User created successfully', function () {",
                      "    const response = pm.response.json();",
                      "    pm.expect(response).to.have.property('id');",
                      "    pm.expect(response).to.have.property('email');",
                      "    pm.expect(response).to.have.property('firstName');",
                      "    pm.expect(response).to.have.property('lastName');",
                      "    pm.expect(response).to.have.property('status');",
                      "    pm.expect(response.status).to.equal('pending');",
                      "    pm.expect(response.emailVerified).to.be.false;",
                      "});",
                      "",
                      "pm.test('User ID is valid format', function () {",
                      "    const response = pm.response.json();",
                      "    pm.expect(response.id).to.be.a('string');",
                      "    pm.expect(response.id.length).to.be.greaterThan(0);",
                      "});",
                      "",
                      "// Store user ID for subsequent tests",
                      "if (pm.response.code === 201) {",
                      "    const response = pm.response.json();",
                      "    pm.environment.set('newUserId', response.id);",
                      "}"
                    ],
                    "type": "text/javascript"
                  }
                }
              ]
            },
            {
              "name": "Register User - Duplicate Email",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"email\": \"existinguser@example.com\",\n  \"password\": \"SuperAdmin123!\",\n  \"firstName\": \"Jane\",\n  \"lastName\": \"Smith\",\n  \"tenantId\": \"{{tenantId}}\",\n  \"role\": \"member\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/users",
                  "host": ["{{baseUrl}}"],
                  "path": ["users"]
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Status code is 400', function () {",
                      "    pm.response.to.have.status(400);",
                      "});",
                      "",
                      "pm.test('Duplicate email error', function () {",
                      "    const response = pm.response.json();",
                      "    pm.expect(response.message).to.include('already exists');",
                      "});"
                    ],
                    "type": "text-javascript"
                  }
                }
              ]
            }
          ]
        },
        {
          "name": "User Activation Tests",
          "item": [
            {
              "name": "Activate User - Success",
              "request": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"skipEmailVerification\": false,\n  \"auditEvent\": \"user.activated_by_admin\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/users/lifecycle/{{newUserId}}/activate",
                  "host": ["{{baseUrl}}"],
                  "path": ["users", "lifecycle", "{{newUserId}}", "activate"]
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Status code is 200', function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test('User activated successfully', function () {",
                      "    const response = pm.response.json();",
                      "    pm.expect(response.status).to.equal('active');",
                      "    pm.expect(response.emailVerified).to.be.true;",
                      "});",
                      "",
                      "pm.test('Response time is acceptable', function () {",
                      "    pm.expect(pm.response.responseTime).to.be.below(1000);",
                      "});"
                    ],
                    "type": "text-javascript"
                  }
                }
              ]
            },
            {
              "name": "Activate User - Already Active",
              "request": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"skipEmailVerification\": false\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/users/lifecycle/{{userId}}/activate",
                  "host": ["{{baseUrl}}"],
                  "path": ["users", "lifecycle", "{{userId}}", "activate"]
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Status code is 400', function () {",
                      "    pm.response.to.have.status(400);",
                      "});",
                      "",
                      "pm.test('Already active error', function () {",
                      "    const response = pm.response.json();",
                      "    pm.expect(response.message).to.include('already active');",
                      "});"
                    ],
                    "type": "text-javascript"
                  }
                }
              ]
            }
          ]
        },
        {
          "name": "User Suspension Tests",
          "item": [
            {
              "name": "Suspend User - Success",
              "request": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"reason\": \"Violation of terms of service\",\n  \"duration\": 30,\n  \"auditEvent\": \"user.suspended_by_admin\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/users/lifecycle/{{userId}}/suspend",
                  "host": ["{{baseUrl}}"],
                  "path": ["users", "lifecycle", "{{userId}}", "suspend"]
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Status code is 200', function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test('User suspended successfully', function () {",
                      "    const response = pm.response.json();",
                      "    pm.expect(response.status).to.equal('suspended');",
                      "});",
                      "",
                      "pm.test('Response time is acceptable', function () {",
                      "    pm.expect(pm.response.responseTime).to.be.below(1000);",
                      "});"
                    ],
                    "type": "text-javascript"
                  }
                }
              ]
            },
            {
              "name": "Suspend User - Indefinite",
              "request": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"reason\": \"Security violation\",\n  \"auditEvent\": \"user.suspended_indefinitely\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/users/lifecycle/{{newUserId}}/suspend",
                  "host": ["{{baseUrl}}"],
                  "path": ["users", "lifecycle", "{{newUserId}}", "suspend"]
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Status code is 200', function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test('User suspended indefinitely', function () {",
                      "    const response = pm.response.json();",
                      "    pm.expect(response.status).to.equal('suspended');",
                      "});"
                    ],
                    "type": "text-javascript"
                  }
                }
              ]
            }
          ]
        },
        {
          "name": "User Reactivation Tests",
          "item": [
            {
              "name": "Reactivate User - Success",
              "request": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"auditEvent\": \"user.reactivated_by_admin\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/users/lifecycle/{{newUserId}}/reactivate",
                  "host": ["{{baseUrl}}"],
                  "path": ["users", "lifecycle", "{{newUserId}}", "reactivate"]
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Status code is 200', function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test('User reactivated successfully', function () {",
                      "    const response = pm.response.json();",
                      "    pm.expect(response.status).to.equal('active');",
                      "});",
                      "",
                      "pm.test('Response time is acceptable', function () {",
                      "    pm.expect(pm.response.responseTime).to.be.below(1000);",
                      "});"
                    ],
                    "type": "text-javascript"
                  }
                }
              ]
            }
          ]
        },
        {
          "name": "User Lifecycle Information Tests",
          "item": [
            {
              "name": "Get User Lifecycle Info - Success",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/users/{{userId}}/lifecycle",
                  "host": ["{{baseUrl}}"],
                  "path": ["users", "{{userId}}", "lifecycle"]
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Status code is 200', function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test('Lifecycle info retrieved', function () {",
                      "    const response = pm.response.json();",
                      "    pm.expect(response).to.have.property('isActive');",
                      "    pm.expect(response).to.have.property('isSuspended');",
                      "    pm.expect(response).to.have.property('isDeleted');",
                      "    pm.expect(response).to.have.property('user');",
                      "});",
                      "",
                      "pm.test('Response time is acceptable', function () {",
                      "    pm.expect(pm.response.responseTime).to.be.below(500);",
                      "});"
                    ],
                    "type": "text-javascript"
                  }
                }
              ]
            },
            {
              "name": "Get User Lifecycle Info - Not Found",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/users/non-existent-user-id/lifecycle",
                  "host": ["{{baseUrl}}"],
                  "path": ["users", "non-existent-user-id", "lifecycle"]
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Status code is 404', function () {",
                      "    pm.response.to.have.status(404);",
                      "});",
                      "",
                      "pm.test('Error message is clear', function () {",
                      "    const response = pm.response.json();",
                      "    pm.expect(response.message).to.include('not found');",
                      "});"
                    ],
                    "type": "text-javascript"
                  }
                }
              ]
            }
          ]
        },
        {
          "name": "User Deletion Tests",
          "item": [
            {
              "name": "Delete User - Success",
              "request": {
                "method": "DELETE",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"auditEvent\": \"user.deleted_by_admin\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/users/{{newUserId}}",
                  "host": ["{{baseUrl}}"],
                  "path": ["users", "{{newUserId}}"]
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Status code is 204', function () {",
                      "    pm.response.to.have.status(204);",
                      "});",
                      "",
                      "pm.test('Response time is acceptable', function () {",
                      "    pm.expect(pm.response.responseTime).to.be.below(1000);",
                      "});"
                    ],
                    "type": "text-javascript"
                  }
                }
              ]
            }
          ]
        },
        {
          "name": "Bulk Operations Tests",
          "item": [
            {
              "name": "Bulk Activate Users - Success",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"userIds\": [\"{{userId}}\"],\n  \"auditEvent\": \"users.bulk_activated_by_admin\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/users/lifecycle/activate",
                  "host": ["{{baseUrl}}"],
                  "path": ["users", "lifecycle", "activate"]
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Status code is 200', function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test('Bulk activation successful', function () {",
                      "    const response = pm.response.json();",
                      "    pm.expect(response).to.have.property('successCount');",
                      "    pm.expect(response).to.have.property('failureCount');",
                      "    pm.expect(response).to.have.property('successfulUserIds');",
                      "    pm.expect(response).to.have.property('errors');",
                      "});",
                      "",
                      "pm.test('Response time is acceptable', function () {",
                      "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                      "});"
                    ],
                    "type": "text-javascript"
                  }
                }
              ]
            },
            {
              "name": "Bulk Suspend Users - Success",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"userIds\": [\"{{userId}}\"],\n  \"auditEvent\": \"users.bulk_suspended_by_admin\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/users/lifecycle/suspend",
                  "host": ["{{baseUrl}}"],
                  "path": ["users", "lifecycle", "suspend"]
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Status code is 200', function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test('Bulk suspension successful', function () {",
                      "    const response = pm.response.json();",
                      "    pm.expect(response).to.have.property('successCount');",
                      "    pm.expect(response).to.have.property('failureCount');",
                      "});",
                      "",
                      "pm.test('Response time is acceptable', function () {",
                      "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                      "});"
                    ],
                    "type": "text-javascript"
                  }
                }
              ]
            },
            {
              "name": "Bulk Reactivate Users - Success",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"userIds\": [\"{{userId}}\"],\n  \"auditEvent\": \"users.bulk_reactivated_by_admin\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/users/lifecycle/reactivate",
                  "host": ["{{baseUrl}}"],
                  "path": ["users", "lifecycle", "reactivate"]
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Status code is 200', function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test('Bulk reactivation successful', function () {",
                      "    const response = pm.response.json();",
                      "    pm.expect(response).to.have.property('successCount');",
                      "    pm.expect(response).to.have.property('failureCount');",
                      "});",
                      "",
                      "pm.test('Response time is acceptable', function () {",
                      "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                      "});"
                    ],
                    "type": "text-javascript"
                  }
                }
              ]
            },
            {
              "name": "Bulk Delete Users - Success",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"userIds\": [\"{{userId}}\"],\n  \"auditEvent\": \"users.bulk_deleted_by_admin\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/users/lifecycle/delete",
                  "host": ["{{baseUrl}}"],
                  "path": ["users", "lifecycle", "delete"]
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Status code is 200', function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test('Bulk deletion successful', function () {",
                      "    pm.expect(response).to.have.property('successCount');",
                      "    pm.expect(response).to.have.property('failureCount');",
                      "});",
                      "",
                      "pm.test('Response time is acceptable', function () {",
                      "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                      "});"
                    ],
                    "type": "text-javascript"
                  }
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "File Storage Management Tests",
      "item": [
        {
          "name": "1. Upload File - Success",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": []
                },
                {
                  "key": "key",
                  "value": "test-uploads/{{$timestamp}}/test-file.txt",
                  "type": "text"
                },
                {
                  "key": "metadata",
                  "value": "{\"category\":\"test\",\"uploadedBy\":\"{{userId}}\"}",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/files/upload",
              "host": ["{{baseUrl}}"],
              "path": ["files", "upload"]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('File uploaded successfully', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('key');",
                  "    pm.expect(response).to.have.property('url');",
                  "    pm.expect(response).to.have.property('size');",
                  "    pm.expect(response).to.have.property('mimeType');",
                  "    pm.expect(response).to.have.property('lastModified');",
                  "});",
                  "",
                  "pm.test('File key is valid', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.key).to.include('test-uploads');",
                  "});",
                  "",
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('fileKey', response.key);",
                  "    pm.environment.set('fileUrl', response.url);",
                  "}"
                ],
                "type": "text-javascript"
              }
            }
          ]
        },
        {
          "name": "2. Get File Metadata - Success",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/files/metadata/{{fileKey}}",
              "host": ["{{baseUrl}}"],
              "path": ["files", "metadata", "{{fileKey}}"]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('File metadata retrieved', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('key');",
                  "    pm.expect(response).to.have.property('size');",
                  "    pm.expect(response).to.have.property('mimeType');",
                  "    pm.expect(response).to.have.property('lastModified');",
                  "});",
                  "",
                  "pm.test('Metadata matches uploaded file', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.key).to.equal(pm.environment.get('fileKey'));",
                  "});"
                ],
                "type": "text-javascript"
              }
            }
          ]
        },
        {
          "name": "3. Check File Exists - Success",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/files/exists/{{fileKey}}",
              "host": ["{{baseUrl}}"],
              "path": ["files", "exists", "{{fileKey}}"]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('File exists check successful', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('exists');",
                  "    pm.expect(response.exists).to.be.true;",
                  "});"
                ],
                "type": "text-javascript"
              }
            }
          ]
        },
        {
          "name": "4. Generate Signed URL - Success",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"key\": \"{{fileKey}}\",\n  \"expiresIn\": 3600\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/files/signed-url",
              "host": ["{{baseUrl}}"],
              "path": ["files", "signed-url"]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Signed URL generated', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('signedUrl');",
                  "    pm.expect(response.signedUrl).to.include('http');",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('signedUrl', response.signedUrl);",
                  "}"
                ],
                "type": "text-javascript"
              }
            }
          ]
        },
        {
          "name": "16. Get Public URL - Success",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/files/public-url/{{fileKey}}",
              "host": ["{{baseUrl}}"],
              "path": ["files", "public-url", "{{fileKey}}"]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Public URL retrieved', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('publicUrl');",
                  "    pm.expect(response.publicUrl).to.include('http');",
                  "});"
                ],
                "type": "text-javascript"
              }
            }
          ]
        },
        {
          "name": "16. Copy File - Success",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"sourceKey\": \"{{fileKey}}\",\n  \"destinationKey\": \"test-copies/{{$timestamp}}/copied-file.txt\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/files/copy",
              "host": ["{{baseUrl}}"],
              "path": ["files", "copy"]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('File copied successfully', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('key');",
                  "    pm.expect(response.key).to.not.equal('{{fileKey}}');",
                  "    pm.expect(response.key).to.include('test-copies');",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('copiedFileKey', response.key);",
                  "}"
                ],
                "type": "text-javascript"
              }
            }
          ]
        },
        {
          "name": "16. Move File - Success",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"sourceKey\": \"{{fileKey}}\",\n  \"destinationKey\": \"test-moved/{{$timestamp}}/moved-file.txt\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/files/move",
              "host": ["{{baseUrl}}"],
              "path": ["files", "move"]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('File moved successfully', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('key');",
                  "    pm.expect(response.key).to.not.equal('{{fileKey}}');",
                  "    pm.expect(response.key).to.include('test-moved');",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('movedFileKey', response.key);",
                  "}"
                ],
                "type": "text-javascript"
              }
            }
          ]
        },
        {
          "name": "16. List Files - Success",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/files/list?prefix=test-uploads&maxKeys=10",
              "host": ["{{baseUrl}}"],
              "path": ["files", "list"],
              "query": [
                {
                  "key": "prefix",
                  "value": "test-uploads"
                },
                {
                  "key": "maxKeys",
                  "value": "10"
                }
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Files listed successfully', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.be.an('array');",
                  "    if (response.length > 0) {",
                  "        pm.expect(response[0]).to.have.property('key');",
                  "        pm.expect(response[0]).to.have.property('size');",
                  "        pm.expect(response[0]).to.have.property('mimeType');",
                  "    }",
                  "});"
                ],
                "type": "text-javascript"
              }
            }
          ]
        },
        {
          "name": "16. Get Storage Health Status - Success",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/files/health",
              "host": ["{{baseUrl}}"],
              "path": ["files", "health"]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Storage health status retrieved', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.be.an('array');",
                  "    if (response.length > 0) {",
                  "        pm.expect(response[0]).to.have.property('provider');",
                  "        pm.expect(response[0]).to.have.property('status');",
                  "        pm.expect(response[0]).to.have.property('responseTime');",
                  "        pm.expect(response[0]).to.have.property('lastChecked');",
                  "    }",
                  "});"
                ],
                "type": "text-javascript"
              }
            }
          ]
        },
        {
          "name": "16. Get Available Providers - Success",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/files/providers",
              "host": ["{{baseUrl}}"],
              "path": ["files", "providers"]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Available providers retrieved', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.be.an('array');",
                  "    pm.expect(response).to.contain('local');",
                  "});"
                ],
                "type": "text-javascript"
              }
            }
          ]
        },
        {
          "name": "16. Delete File - Success",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/files/{{fileKey}}",
              "host": ["{{baseUrl}}"],
              "path": ["files", "{{fileKey}}"]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 204', function () {",
                  "    pm.response.to.have.status(204);",
                  "});",
                  "",
                  "pm.test('File deleted successfully', function () {",
                  "    pm.expect(pm.response.body).to.be.empty;",
                  "});"
                ],
                "type": "text-javascript"
              }
            }
          ]
        },
        {
          "name": "16. Check File Exists After Deletion - Success",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/files/exists/{{fileKey}}",
              "host": ["{{baseUrl}}"],
              "path": ["files", "exists", "{{fileKey}}"]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('File no longer exists', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('exists');",
                  "    pm.expect(response.exists).to.be.false;",
                  "});"
                ],
                "type": "text-javascript"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Teams Tests",
      "item": [
        {
          "name": "1. Create Team - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Team created successfully', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('id');",
                  "    pm.expect(response).to.have.property('name');",
                  "    pm.expect(response).to.have.property('description');",
                  "    pm.expect(response).to.have.property('status');",
                  "    pm.expect(response).to.have.property('createdAt');",
                  "    pm.expect(response).to.have.property('updatedAt');",
                  "    pm.expect(response.name).to.equal('Test Development Team');",
                  "    pm.expect(response.description).to.equal('Test team for automated testing');",
                  "});",
                  "",
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('teamId', response.id);",
                  "}"
                ],
                "type": "text-javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Test Development Team\",\n  \"description\": \"Test team for automated testing\",\n  \"managerId\": \"{{userId}}\",\n  \"settings\": {\n    \"allowMemberInvites\": true,\n    \"requireApproval\": false,\n    \"maxMembers\": 5\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/teams",
              "host": ["{{baseUrl}}"],
              "path": ["teams"]
            }
          },
          "response": []
        },
        {
          "name": "2. Create Team - Validation Error",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 400', function () {",
                  "    pm.response.to.have.status(400);",
                  "});",
                  "",
                  "pm.test('Validation error returned', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('message');",
                  "    pm.expect(response).to.have.property('errors');",
                  "    pm.expect(response.errors).to.be.an('array');",
                  "});"
                ],
                "type": "text-javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"\",\n  \"description\": \"Test team with invalid name\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/teams",
              "host": ["{{baseUrl}}"],
              "path": ["teams"]
            }
          },
          "response": []
        },
        {
          "name": "3. Get All Teams - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Teams list retrieved', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('teams');",
                  "    pm.expect(response).to.have.property('total');",
                  "    pm.expect(response.teams).to.be.an('array');",
                  "});"
                ],
                "type": "text-javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/teams?page=1&limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["teams"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "4. Get My Teams - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('User teams retrieved', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.be.an('array');",
                  "});"
                ],
                "type": "text-javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/teams/my-teams",
              "host": ["{{baseUrl}}"],
              "path": ["teams", "my-teams"]
            }
          },
          "response": []
        },
        {
          "name": "5. Get Team by ID - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Team details retrieved', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('id');",
                  "    pm.expect(response).to.have.property('name');",
                  "    pm.expect(response).to.have.property('description');",
                  "    pm.expect(response).to.have.property('status');",
                  "    pm.expect(response).to.have.property('createdAt');",
                  "    pm.expect(response).to.have.property('updatedAt');",
                  "    pm.expect(response.id).to.equal('{{teamId}}');",
                  "});"
                ],
                "type": "text-javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/teams/{{teamId}}",
              "host": ["{{baseUrl}}"],
              "path": ["teams", "{{teamId}}"]
            }
          },
          "response": []
        },
        {
          "name": "6. Get Team by ID - Not Found",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 404', function () {",
                  "    pm.response.to.have.status(404);",
                  "});",
                  "",
                  "pm.test('Team not found error', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('message');",
                  "    pm.expect(response.message).to.include('not found');",
                  "});"
                ],
                "type": "text-javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/teams/00000000-0000-0000-0000-000000000000",
              "host": ["{{baseUrl}}"],
              "path": ["teams", "00000000-0000-0000-0000-000000000000"]
            }
          },
          "response": []
        },
        {
          "name": "7. Update Team - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Team updated successfully', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('id');",
                  "    pm.expect(response).to.have.property('name');",
                  "    pm.expect(response).to.have.property('description');",
                  "    pm.expect(response.name).to.equal('Updated Test Team');",
                  "    pm.expect(response.description).to.equal('Updated test team description');",
                  "});"
                ],
                "type": "text-javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Updated Test Team\",\n  \"description\": \"Updated test team description\",\n  \"settings\": {\n    \"allowMemberInvites\": false,\n    \"requireApproval\": true,\n    \"maxMembers\": 8\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/teams/{{teamId}}",
              "host": ["{{baseUrl}}"],
              "path": ["teams", "{{teamId}}"]
            }
          },
          "response": []
        },
        {
          "name": "8. Add Team Member - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Team member added successfully', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('id');",
                  "    pm.expect(response).to.have.property('userId');",
                  "    pm.expect(response).to.have.property('teamId');",
                  "    pm.expect(response).to.have.property('role');",
                  "    pm.expect(response).to.have.property('joinedAt');",
                  "    pm.expect(response.role).to.equal('member');",
                  "});",
                  "",
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('userId', response.userId);",
                  "}"
                ],
                "type": "text-javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": \"{{newUserId}}\",\n  \"role\": \"member\",\n  \"permissions\": [\"read\", \"write\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/teams/{{teamId}}/members",
              "host": ["{{baseUrl}}"],
              "path": ["teams", "{{teamId}}", "members"]
            }
          },
          "response": []
        },
        {
          "name": "9. Get Team Members - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Team members retrieved', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('data');",
                  "    pm.expect(response).to.have.property('pagination');",
                  "    pm.expect(response.data).to.be.an('array');",
                  "    if (response.data.length > 0) {",
                  "        pm.expect(response.data[0]).to.have.property('id');",
                  "        pm.expect(response.data[0]).to.have.property('userId');",
                  "        pm.expect(response.data[0]).to.have.property('role');",
                  "        pm.expect(response.data[0]).to.have.property('joinedAt');",
                  "    }",
                  "});"
                ],
                "type": "text-javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/teams/{{teamId}}/members?page=1&limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["teams", "{{teamId}}", "members"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "10. Update Team Member - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Team member updated successfully', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('id');",
                  "    pm.expect(response).to.have.property('role');",
                  "    pm.expect(response.role).to.equal('admin');",
                  "});"
                ],
                "type": "text-javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"role\": \"admin\",\n  \"permissions\": [\"read\", \"write\", \"admin\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/teams/{{teamId}}/members/{{userId}}",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "teams", "{{teamId}}", "members", "{{userId}}"]
            }
          },
          "response": []
        },
        {
          "name": "11. Invite Team Member - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Team invitation sent successfully', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('id');",
                  "    pm.expect(response).to.have.property('email');",
                  "    pm.expect(response).to.have.property('role');",
                  "    pm.expect(response).to.have.property('status');",
                  "    pm.expect(response).to.have.property('expiresAt');",
                  "    pm.expect(response.email).to.equal('invited@example.com');",
                  "    pm.expect(response.role).to.equal('member');",
                  "});",
                  "",
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('teamInvitationId', response.id);",
                  "    pm.environment.set('invitationToken', response.token);",
                  "}"
                ],
                "type": "text-javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"invited@example.com\",\n  \"role\": \"member\",\n  \"message\": \"You are invited to join our test team\",\n  \"expiresIn\": 7\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/teams/{{teamId}}/invitations",
              "host": ["{{baseUrl}}"],
              "path": ["teams", "{{teamId}}", "invitations"]
            }
          },
          "response": []
        },
        {
          "name": "12. Get Team Invitations - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Team invitations retrieved', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('data');",
                  "    pm.expect(response).to.have.property('pagination');",
                  "    pm.expect(response.data).to.be.an('array');",
                  "    if (response.data.length > 0) {",
                  "        pm.expect(response.data[0]).to.have.property('id');",
                  "        pm.expect(response.data[0]).to.have.property('email');",
                  "        pm.expect(response.data[0]).to.have.property('status');",
                  "    }",
                  "});"
                ],
                "type": "text-javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/teams/{{teamId}}/invitations?page=1&limit=10&status=pending",
              "host": ["{{baseUrl}}"],
              "path": ["teams", "{{teamId}}", "invitations"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "status",
                  "value": "pending"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "13. Accept Team Invitation - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Team invitation accepted successfully', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('message');",
                  "    pm.expect(response).to.have.property('membership');",
                  "    pm.expect(response.membership).to.have.property('id');",
                  "    pm.expect(response.membership).to.have.property('teamId');",
                  "    pm.expect(response.membership).to.have.property('userId');",
                  "});"
                ],
                "type": "text-javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"token\": \"{{invitationToken}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/teams/invitations/accept",
              "host": ["{{baseUrl}}"],
              "path": ["teams", "invitations", "accept"]
            }
          },
          "response": []
        },
        {
          "name": "14. Get Team Analytics - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Team analytics retrieved', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('totalMembers');",
                  "    pm.expect(response).to.have.property('activeMembers');",
                  "    pm.expect(response).to.have.property('pendingInvitations');",
                  "    pm.expect(response).to.have.property('memberGrowth');",
                  "    pm.expect(response).to.have.property('roleDistribution');",
                  "    pm.expect(response.totalMembers).to.be.a('number');",
                  "    pm.expect(response.activeMembers).to.be.a('number');",
                  "    pm.expect(response.pendingInvitations).to.be.a('number');",
                  "});"
                ],
                "type": "text-javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/teams/{{teamId}}/analytics",
              "host": ["{{baseUrl}}"],
              "path": ["teams", "{{teamId}}", "analytics"]
            }
          },
          "response": []
        },
        {
          "name": "15. Remove Team Member - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Team member removed successfully', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('message');",
                  "    pm.expect(response.message).to.include('removed');",
                  "});"
                ],
                "type": "text-javascript"
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/teams/{{teamId}}/members/{{userId}}",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "teams", "{{teamId}}", "members", "{{userId}}"]
            }
          },
          "response": []
        },
        {
          "name": "16. Delete Team - Success",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Team deleted successfully', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('message');",
                  "    pm.expect(response.message).to.include('deleted');",
                  "});"
                ],
                "type": "text-javascript"
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/teams/{{teamId}}",
              "host": ["{{baseUrl}}"],
              "path": ["teams", "{{teamId}}"]
            }
          },
          "response": []
        }
      ]
    }
  ]
}
